---
title: Análisis de datos para predictor académico UA
author: Facundo Rivas y Braian Biale
date: 14/5/2019
output: 
  rmdformats::readthedown:
    self_contained: true
    thumbnails: true
    lightbox: true
    gallery: false
    highlight: tango
---

```{r, echo=FALSE,message=FALSE}
library(kableExtra)
library(plotrix)
library(dplyr)
load("finalData.RData")
entry2018 <- finalData[-which(finalData$Year == 2019),]
entry2019 <- finalData[-which(finalData$Year == 2018),]
```

# Introducción
### Obtención de los datos
Para la realización de este reporte fueron proporcionados tres archivos *.xlsx*, los cuales contienen ingresantes de los años 2018 y 2019 de la facultad de ingeniería de la Universidad Austral. Estos datos pasaron primeramente por una etapa de *"Data Curation"* o *"Curación de Datos"*, para mejorar su calidad. A continuación se muestra una preview de como quedaron ordenados los datos con sus respectivas variables:

```{r, echo=FALSE}
kable(finalData[1:10,],align = "c")
```

# Análisis

### Calidad de los datos
Como se puede ver hay 12 variables que caracterizan a cada uno de los elementos pertenecientes al conjunto de datos. Luego del proceso de *"Data Curation"*, hay muchas observaciones de las variables que no estan completas. Esto se debe a que, o bien fueron añadidas dichas variables al conjunto original de datos, o bien a que los datos fueron proporcionados ya de esta manera, lo cual afecta a la calidad que tiene la variable. En la siguiente tabla se muestran las variables con sus respectivas calidades (Cantidad de *NA* en cada variable, sobre el total de elementos que conforman el conjunto de datos):

```{r, echo=FALSE}
aux <- data.frame(Porcentaje = c(round(apply(finalData, 2, function(col)sum(!is.na(col))/length(col)*100))))
kable(aux)
```

### Análisis variable a variable

Una vez curados los datos, se hace un análisis "variable a variable" para extraer información de las mismas.

#### Género de los ingresantes

```{r,echo=FALSE}
womanPercentage <- (sum(entry2018$Gender == "F")/length(entry2018$Gender))*100
menPercentage <- (sum(entry2018$Gender == "M")/length(entry2018$Gender))*100
slices <- c(menPercentage,womanPercentage) 
lbls <- c(paste("Varones",round(menPercentage),"%"),paste("Mujeres",round(womanPercentage),"%"))
pie3D(slices,labels=lbls,labelcex = 1.2,explode = 0.05, radius = 0.8,col = c("#FF2C2C","#FF6262"),shade = 0.3,theta = 1,
      main="Porcentaje de ingresantes 2018 por género")
```

```{r,echo=FALSE}
womanPercentage <- (sum(entry2019$Gender == "F")/length(entry2019$Gender))*100
menPercentage <- (sum(entry2019$Gender == "M")/length(entry2019$Gender))*100
slices <- c(menPercentage,womanPercentage) 
lbls <- c(paste("Varones",round(menPercentage),"%"),paste("Mujeres",round(womanPercentage),"%"))
lp <- pie3D(slices,labels=lbls,labelcex = 1.2,explode = 0.05, radius = 0.8,col = c("#FF2C2C","#FF6262"),shade = 0.3,theta = 1,
      main="Porcentaje de ingresantes 2019 por género")

lp

```

Como puede notarse en los gráficos que el porcentaje de mujeres con respecto al de varones es mayor en el año 2019 que en el 2018.

#### Tipos de ingreso 

```{r,echo=FALSE}
par(las=2)
par(mar=c(5,12,4,2))
entrys <- table(finalData$Entry)
barplot(entrys, main="Tipo de ingreso elegido", horiz=TRUE,col = c("#78281F","#7B241C","#922B21","#A93226","#C0392B","#CD6155","#D98880","#E6B0AA","#F2D7D5"))
```

El eje horizontal del gráfico representa la cantidad de ingresantes y el eje vertical contiene los distintos tipos de ingresos. Se puede ver que una gran mayoría de las personas eligen el curso de ingreso de febrero para entrar a la universidad.

#### Colegios de procedencia

```{r,echo=FALSE}
sorted <- sort(table(finalData$School),decreasing = TRUE)
barplot(sorted[1:3],main = "Top 3 colegios que aportaron mas ingresantes entre 2018 y 2019",col = c("#BA4A00","#D35400","#DC7633"))
```

El eje vertical del gráfico representa la cantidad de ingresantes que proporciona cada colegio y el eje horizontal contiene los nombres de los colegios. "Los Molinos", el colegio que más aportó ingresantes es de la misma zona que la Universidad Austral.

#### Notas del examen de Matemática

Se analizan el promedio de todas las notas y el porcentaje de ingresantes que aprobaron el examen en primer instancia, en los años 2018 y 2019.

**2018:**

```{r, echo=FALSE}
hasMathValue <- finalData[which(!is.na(finalData$Math)&finalData$Year==2018),]
mathAverage <- sum(hasMathValue$Math)/length(hasMathValue$Math)
mathApprovedpercentage <- (sum(hasMathValue$Math>4)/length(hasMathValue$Math))*100
aux <- data.frame(Promedio = round(mathAverage), Aprobados = paste(round(mathApprovedpercentage),"%"))
kable(aux,align = "c")
```

**2019:**

```{r, echo=FALSE}
hasMathValue <- finalData[which(!is.na(finalData$Math)&finalData$Year==2019),]
mathAverage <- sum(hasMathValue$Math)/length(hasMathValue$Math)
mathApprovedpercentage <- (sum(hasMathValue$Math>4)/length(hasMathValue$Math))*100
aux <- data.frame(Promedio = round(mathAverage), Aprobados = paste(round(mathApprovedpercentage),"%"))
kable(aux,align = "c")
```

El promedio de nota de los exámenes se mantuvo igual pero el porcentaje de aprobados del año 2019 es menor.

#### Notas del examen de Física

Se analizan el promedio de todas las notas y el porcentaje de ingresantes que aprobaron el examen en primer instancia, en los años 2018 y 2019.

**2018:**

```{r, echo=FALSE}
hasPhysicsValue <- finalData[which(!is.na(finalData$Physics)&finalData$Year==2018),]
physicsAverage <- sum(hasPhysicsValue$Physics)/length(hasPhysicsValue$Physics)
physicsApprovedpercentage <- (sum(hasPhysicsValue$Physics>4)/length(hasPhysicsValue$Physics))*100
aux <- data.frame(Promedio = round(physicsAverage), Aprobados = paste(round(physicsApprovedpercentage),"%"))
kable(aux,align = "c")
```

**2019:**

```{r, echo=FALSE}
hasPhysicsValue <- finalData[which(!is.na(finalData$Physics)&finalData$Year==2019),]
physicsAverage <- sum(hasPhysicsValue$Physics)/length(hasPhysicsValue$Physics)
physicsApprovedpercentage <- (sum(hasPhysicsValue$Physics>4)/length(hasPhysicsValue$Physics))*100
aux <- data.frame(Promedio = round(physicsAverage), Aprobados = paste(round(physicsApprovedpercentage),"%"))
kable(aux,align = "c")
```

El promedio de nota de los exámenes bajó y al igual que el porcentaje de aprobados.

**Se puede notar que en ambas materias el porcentaje de aprobados del año 2019 es menor que el de 2018**

#### Promedio de ingreso

Se analizan los datos de promedio de ingreso observando el porcentaje de ingresantes que obtuvo una puntuación mayor a 7.

```{r, echo=FALSE}
hasEntryAverage <- finalData[which(!is.na(finalData$`Entry Average`)&finalData$Year==2018),]
greaterThan7 <- (sum(hasEntryAverage$`Entry Average`>7)/length(hasEntryAverage$`Entry Average`))*100
slices <- c(greaterThan7,100-greaterThan7) 
lbls <- c(paste(round(greaterThan7),"% mayor a 7"),paste(100-round(greaterThan7),"% menor a 7"))
pie3D(slices,labels=lbls,labelcex = 1.2,explode = 0.05, radius = 1,col = c("#B7950B","#F1C40F"),shade = 0.3,theta = 1,
      main="Promedios de ingreso 2018")
```

```{r, echo=FALSE}
hasEntryAverage <- finalData[which(!is.na(finalData$`Entry Average`)&finalData$Year==2019),]
greaterThan7 <- (sum(hasEntryAverage$`Entry Average`>7)/length(hasEntryAverage$`Entry Average`))*100
slices <- c(greaterThan7,100-greaterThan7) 
lbls <- c(paste(round(greaterThan7),"% mayor a 7"),paste(100-round(greaterThan7),"% menor a 7"))
pie3D(slices,labels=lbls,labelcex = 1.2,explode = 0.05, radius = 1,col = c("#B7950B","#F1C40F"),shade = 0.3,theta = 1,
      main="Promedios de ingreso 2019")
```

**Observese que el porcentaje de ingresantes que obtuvieron un promedio mayor a 7 en 2019 es más de un 10% menor que en 2018.**

#### Promedio de secundaria

Analizamos los datos de promedio de secundaria y obtenemos un top 5.

```{r, echo=FALSE,message=FALSE}
hsAverages <- finalData[,c(1,10)]
hsAverages <- hsAverages[-which(is.na(hsAverages$`HS Average`)),]
##top5 <- order(hsAverages$`HS Average`,decreasing = TRUE)
##kable(hsAverages[top5[1:5],],align = "c")
```

La primer columna representando el nombre y la segunda representando el promedio de secundaria.

#### Recuperatorios

Para las columnas de recuperatorios (Matemática y Física) se analizaron los datos obteniendo un porcentaje de ingresantes que tuvieron que rendir recuperatorio para cada año.

```{r,echo=FALSE}
noExamsNeeded <- finalData[finalData$Entry!="Pase Universitario", ]
noExamsNeeded <- finalData[finalData$Entry!="Ingreso Directo", ]
percentageR2018 <- (sum((!is.na(noExamsNeeded$R.Math) | !is.na(noExamsNeeded$R.Physics) & noExamsNeeded$Year==2018))/length(noExamsNeeded$Year==2018))*100

slices <- c(percentageR2018,100-percentageR2018) 
lbls <- c(paste(round(percentageR2018),"% rindió"),paste(100-round(percentageR2018),"% no rindió"))
pie3D(slices,labels=lbls,labelcex = 1.2,explode = 0.05, radius = 0.8,col = c("#5B2C6F","#8E44AD"),shade = 0.3,theta = 1,
      main="Porcentaje de ingresantes que rindieron recuperatorio en 2018")
```

```{r,echo=FALSE}
noExamsNeeded <- finalData[finalData$Entry!="Pase Universitario", ]
noExamsNeeded <- finalData[finalData$Entry!="Ingreso Directo", ]
percentageR2019 <- (sum((!is.na(noExamsNeeded$R.Math) | !is.na(noExamsNeeded$R.Physics) & noExamsNeeded$Year==2019))/length(noExamsNeeded$Year==2019))*100

slices <- c(percentageR2019,100-percentageR2019) 
lbls <- c(paste(round(percentageR2019),"% rindió"),paste(100-round(percentageR2019),"% no rindió"))
pie3D(slices,labels=lbls,labelcex = 1.2,explode = 0.05, radius = 0.8,col = c("#5B2C6F","#8E44AD"),shade = 0.3,theta = 1,
      main="Porcentaje de ingresantes que rindieron recuperatorio en 2019")
```

**Los porcentajes para ambos años son muy similares.**

# Interpretación

Luego de analizar los datos variable a variable, se hace una interpretación de dichos análisis cruzando datos con el fin de obtener más información de las conclusiones a las que se llega.

#### Media de los promedios de ingreso segun género

**2018:**

```{r,echo=FALSE}
hasEntryAverageMan <- finalData[which(!is.na(finalData$`Entry Average`)&finalData$Gender=="M"&finalData$Year==2018),]
hasEntryAverageWoman <- finalData[which(!is.na(finalData$`Entry Average`)&finalData$Gender=="F"&finalData$Year==2018),]
manEntryAverage <- sum(hasEntryAverageMan$`Entry Average`)/length(hasEntryAverageMan$Year==2018)
womanEntryAverage <- sum(hasEntryAverageWoman$`Entry Average`)/length(hasEntryAverageWoman$Year==2018)
aux <- data.frame(Gender = c("Varones","Mujeres"), Mean = c(round(manEntryAverage,2),round(womanEntryAverage,2)))
kable(aux)
```

Las mujeres obtuvieron un promedio de ingreso 0.40 puntos mayor al de los varones.

**2019:**

```{r,echo=FALSE}
hasEntryAverageMan <- finalData[which(!is.na(finalData$`Entry Average`)&finalData$Gender=="M"&finalData$Year==2019),]
hasEntryAverageWoman <- finalData[which(!is.na(finalData$`Entry Average`)&finalData$Gender=="F"&finalData$Year==2019),]
manEntryAverage <- sum(hasEntryAverageMan$`Entry Average`)/length(hasEntryAverageMan$Year==2019)
womanEntryAverage <- sum(hasEntryAverageWoman$`Entry Average`)/length(hasEntryAverageWoman$Year==2019)
aux <- data.frame(Gender = c("Varones","Mujeres"), Mean = c(round(manEntryAverage,2),round(womanEntryAverage,2)))
kable(aux)
```

Las mujeres obtuvieron un promedio de ingreso 0.09 puntos mayor al de los varones.

**La diferencia de promedios de ingreso entre varones y mujeres fue mas baja en el último año.**


